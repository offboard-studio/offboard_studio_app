{"editor":{"id":"21818137-b0d0-42cc-858a-bce9a811f60f","locked":false,"offsetX":0,"offsetY":0,"zoom":100,"gridSize":0,"layers":[{"id":"6c349474-2fd1-456e-a208-a40dce93fffd","type":"diagram-links","isSvg":true,"transformed":true,"models":{"f3f04f05-fbd5-41d4-84e0-efc1591bc0a9":{"id":"f3f04f05-fbd5-41d4-84e0-efc1591bc0a9","type":"default","selected":false,"source":"0006-859f70cc-a897-4fbd-b03a-7586eed88c9a","sourcePort":"76c23ae8-d251-4bda-9b9e-9971e64a278d","target":"db58dc8c-ea94-4866-bf4e-e689e16aac47","targetPort":"436409eb-3b41-46e4-8be0-7d3815187ef5","points":[{"id":"19a02b1b-e450-4363-a4c3-03aec65b33db","type":"point","x":889,"y":167.5},{"id":"1d0d37e5-f853-41bf-a422-9c9642da31f2","type":"point","x":894.816650390625,"y":306}],"labels":[],"width":3,"color":"gray","curvyness":50,"selectedColor":"rgb(0,192,255)"},"3192c34c-5b26-488e-89d4-f055658d7330":{"id":"3192c34c-5b26-488e-89d4-f055658d7330","type":"default","selected":false,"source":"db58dc8c-ea94-4866-bf4e-e689e16aac47","sourcePort":"6630a046-ea4e-4026-8cc0-47b9a54ded6f","target":"f2c26f9b-0fee-4e27-bc4d-2112fb66498d","targetPort":"b078f857-91a4-49f7-84e5-e73af3e34be9","points":[{"id":"d3709247-1e34-4bfe-8443-2691702975c4","type":"point","x":1341.1500244140625,"y":570},{"id":"28d4d268-c578-4d97-af97-ef54c0fa4bc3","type":"point","x":1399.5,"y":568.5}],"labels":[],"width":3,"color":"gray","curvyness":50,"selectedColor":"rgb(0,192,255)"},"972978bb-0c75-4a47-a730-019c9740518c":{"id":"972978bb-0c75-4a47-a730-019c9740518c","type":"default","selected":false,"source":"a44065dd-4485-4b47-9c69-d0335039295c","sourcePort":"61f33c2f-4f5f-4f8f-bbdb-0cc8be7d2452","target":"db58dc8c-ea94-4866-bf4e-e689e16aac47","targetPort":"600add38-5652-4e01-9d08-76f836783ee9","points":[{"id":"56f5b395-d6d8-47f6-bee7-cfd80ef764ef","type":"point","x":355.5,"y":458.5},{"id":"f14145eb-e1f5-4c61-a5b6-0487ca86e151","type":"point","x":448.5,"y":482}],"labels":[],"width":3,"color":"gray","curvyness":50,"selectedColor":"rgb(0,192,255)"},"41032fc6-a3be-43e8-add0-74990d162f57":{"id":"41032fc6-a3be-43e8-add0-74990d162f57","type":"default","selected":false,"source":"08490010-7599-443b-a4f2-d5f49921be05","sourcePort":"79e7c3f0-8bf2-43ce-8bc3-9878f5db391e","target":"db58dc8c-ea94-4866-bf4e-e689e16aac47","targetPort":"29af65b4-9235-4a10-b002-218e0610716b","points":[{"id":"41436702-e81b-459f-875a-f08616dec02b","type":"point","x":354.5,"y":672.5},{"id":"424cd813-5bda-4b8b-9415-9b36d482aa5b","type":"point","x":448.5,"y":658}],"labels":[],"width":3,"color":"gray","curvyness":50,"selectedColor":"rgb(0,192,255)"}}},{"id":"85b04037-547a-4c6f-b3a4-d6b03a2389ee","type":"diagram-nodes","isSvg":false,"transformed":true,"models":{"a44065dd-4485-4b47-9c69-d0335039295c":{"id":"a44065dd-4485-4b47-9c69-d0335039295c","type":"basic.input","selected":false,"x":262,"y":432,"ports":[{"id":"61f33c2f-4f5f-4f8f-bbdb-0cc8be7d2452","type":"port.output","x":348,"y":451,"name":"input-out","alignment":"right","parentNode":"a44065dd-4485-4b47-9c69-d0335039295c","links":["972978bb-0c75-4a47-a730-019c9740518c"],"in":false,"label":"Img","hideLabel":true}],"data":{"name":"Img"}},"08490010-7599-443b-a4f2-d5f49921be05":{"id":"08490010-7599-443b-a4f2-d5f49921be05","type":"basic.input","selected":false,"x":261,"y":646,"ports":[{"id":"79e7c3f0-8bf2-43ce-8bc3-9878f5db391e","type":"port.output","x":347,"y":665,"name":"input-out","alignment":"right","parentNode":"08490010-7599-443b-a4f2-d5f49921be05","links":["41032fc6-a3be-43e8-add0-74990d162f57"],"in":false,"label":"Enable","hideLabel":true}],"data":{"name":"Enable"}},"f2c26f9b-0fee-4e27-bc4d-2112fb66498d":{"id":"f2c26f9b-0fee-4e27-bc4d-2112fb66498d","type":"basic.output","selected":false,"x":1391,"y":542,"ports":[{"id":"b078f857-91a4-49f7-84e5-e73af3e34be9","type":"port.input","x":1392,"y":561,"name":"output-in","alignment":"left","parentNode":"f2c26f9b-0fee-4e27-bc4d-2112fb66498d","links":["3192c34c-5b26-488e-89d4-f055658d7330"],"in":true,"label":"output-in","hideLabel":true}],"data":{"name":"Out"}},"0006-859f70cc-a897-4fbd-b03a-7586eed88c9a":{"id":"0006-859f70cc-a897-4fbd-b03a-7586eed88c9a","type":"basic.constant","selected":false,"x":828,"y":52,"ports":[{"id":"76c23ae8-d251-4bda-9b9e-9971e64a278d","type":"port.output","x":881.5,"y":160,"name":"constant-out","alignment":"bottom","parentNode":"0006-859f70cc-a897-4fbd-b03a-7586eed88c9a","links":["f3f04f05-fbd5-41d4-84e0-efc1591bc0a9"],"in":false,"label":"BoxOrImage","hideLabel":true}],"data":{"name":"BoxOrImage","value":"image","local":true}},"db58dc8c-ea94-4866-bf4e-e689e16aac47":{"id":"db58dc8c-ea94-4866-bf4e-e689e16aac47","type":"basic.code","selected":false,"x":440,"y":228,"ports":[{"id":"600add38-5652-4e01-9d08-76f836783ee9","type":"port.input","x":441,"y":474.5,"name":"Img","alignment":"left","parentNode":"db58dc8c-ea94-4866-bf4e-e689e16aac47","links":["972978bb-0c75-4a47-a730-019c9740518c"],"in":true,"label":"Img","hideLabel":false},{"id":"29af65b4-9235-4a10-b002-218e0610716b","type":"port.input","x":441,"y":650.5,"name":"Enable","alignment":"left","parentNode":"db58dc8c-ea94-4866-bf4e-e689e16aac47","links":["41032fc6-a3be-43e8-add0-74990d162f57"],"in":true,"label":"Enable","hideLabel":false},{"id":"6630a046-ea4e-4026-8cc0-47b9a54ded6f","type":"port.output","x":1333.6500244140625,"y":562.5,"name":"Out","alignment":"right","parentNode":"db58dc8c-ea94-4866-bf4e-e689e16aac47","links":["3192c34c-5b26-488e-89d4-f055658d7330"],"in":false,"label":"Out","hideLabel":false},{"id":"436409eb-3b41-46e4-8be0-7d3815187ef5","type":"port.parameter","x":887.316650390625,"y":298.5,"name":"BoxOrImage","alignment":"top","parentNode":"db58dc8c-ea94-4866-bf4e-e689e16aac47","links":["f3f04f05-fbd5-41d4-84e0-efc1591bc0a9"],"in":true,"label":"BoxOrImage","hideLabel":false}],"data":{"code":"import cv2\nimport numpy as np\n\ndef main(inputs, outputs, parameters, synchronise):\n    choice = parameters.read_string(\"BoxOrImage\")\n    \n    auto_enable = False\n    try:\n        enable = inputs.read_number(\"Enable\")\n    except Exception:\n        auto_enable = True\n\n    classifier = cv2.CascadeClassifier('utils/models/haar_cascade/haarcascade_frontalface_default.xml')\n\n    while(auto_enable or inputs.read_number('Enable')):\n        img = inputs.read_image(\"Img\")\n        if img is None:\n            continue\n        bboxes = classifier.detectMultiScale(img)\n        \n        if choice == 'image':\n            for box in bboxes:\n                x, y, x1, y1 = box\n                x1, y1 = x+x1, y+y1\n                cv2.rectangle(img, (x, y), (x1, y1), (0,255,0), 2)\n            outputs.share_image('Out', img)\n        else:\n            to_write = [320, 240, 0, 0]\n            for box in bboxes:\n                to_write = [box[0], box[1], box[2], box[3]]\n                break\n            outputs.share_array(\"Out\", to_write)\n    \n    synchronise()\n\n\n        ","frequency":"30","params":[{"name":"BoxOrImage"}],"ports":{"in":[{"name":"Img"},{"name":"Enable"}],"out":[{"name":"Out"}]},"size":{"width":"774px","height":"499px"}}}}}]},"version":"3.0","package":{"name":"FaceDetector","version":"2.0.0","description":"Detects Faces in an Image","author":"Muhammad Taha Suhail. Suhas Gopal, Toshan Luktuke","image":"data:image/svg+xml;base64,PHN2ZyBlbmFibGUtYmFja2dyb3VuZD0ibmV3IDAgMCAyNCAyNCIgaGVpZ2h0PSI1MTIiIHZpZXdCb3g9IjAgMCAyNCAyNCIgd2lkdGg9IjUxMiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48ZyBpZD0iY29sb3JfMV8iPjxwYXRoIGQ9Im0xMiAxM2MyLjc1NyAwIDUtMi4yNDMgNS01cy0yLjI0My01LTUtNS01IDIuMjQzLTUgNSAyLjI0MyA1IDUgNXoiIGZpbGw9IiM2MDdkOGIiLz48cGF0aCBkPSJtMTYuNSAxNWgtOWMtMi42MTkgMC00Ljc1IDIuMTMxLTQuNzUgNC43NXYzLjVjMCAuNDE0LjMzNi43NS43NS43NWgxN2MuNDE0IDAgLjc1LS4zMzYuNzUtLjc1di0zLjVjMC0yLjYxOS0yLjEzMS00Ljc1LTQuNzUtNC43NXoiIGZpbGw9IiM2MDdkOGIiLz48cGF0aCBkPSJtMTIgM2MtMi43NTcgMC01IDIuMjQzLTUgNXMyLjI0MyA1IDUgNXoiIGZpbGw9IiM1NDZkNzkiLz48cGF0aCBkPSJtMTIgMTVoLTQuNWMtMi42MTkgMC00Ljc1IDIuMTMxLTQuNzUgNC43NXYzLjVjMCAuNDE0LjMzNi43NS43NS43NWg4LjV6IiBmaWxsPSIjNTQ2ZDc5Ii8+PHBhdGggZD0ibTMgNS43NWMtLjU1MiAwLTEtLjQ0Ny0xLTF2LTEuNzVjMC0xLjY1NCAxLjM0Ni0zIDMtM2gxLjVjLjU1MiAwIDEgLjQ0NyAxIDFzLS40NDggMS0xIDFoLTEuNWMtLjU1MSAwLTEgLjQ0OC0xIDF2MS43NWMwIC41NTMtLjQ0OCAxLTEgMXoiIGZpbGw9IiMwMGJjZDQiLz48cGF0aCBkPSJtNi41IDE0aC0xLjVjLTEuNjU0IDAtMy0xLjM0Ni0zLTN2LTEuNzVjMC0uNTUzLjQ0OC0xIDEtMXMxIC40NDcgMSAxdjEuNzVjMCAuNTUyLjQ0OSAxIDEgMWgxLjVjLjU1MiAwIDEgLjQ0NyAxIDFzLS40NDggMS0xIDF6IiBmaWxsPSIjMDBiY2Q0Ii8+PHBhdGggZD0ibTQuNzUuMDFjLTEuNTM4LjEyOC0yLjc1IDEuNDItMi43NSAyLjk5djEuNzVjMCAuNTUzLjQ0OCAxIDEgMXMxLS40NDcgMS0xdi0xLjc1YzAtLjQ2NS4zMTktLjg1Ny43NS0uOTY4eiIgZmlsbD0iIzAwYTRiOSIvPjxwYXRoIGQ9Im0zIDguMjVjLS41NTIgMC0xIC40NDctMSAxdjEuNzVjMCAxLjU3IDEuMjEyIDIuODYyIDIuNzUgMi45OXYtMi4wMjFjLS40MzEtLjExMi0uNzUtLjUwNC0uNzUtLjk2OXYtMS43NWMwLS41NTMtLjQ0OC0xLTEtMXoiIGZpbGw9IiMwMGE0YjkiLz48cGF0aCBkPSJtMjEgNS43NWMtLjU1MiAwLTEtLjQ0Ny0xLTF2LTEuNzVjMC0uNTUyLS40NDktMS0xLTFoLTEuNWMtLjU1MiAwLTEtLjQ0Ny0xLTFzLjQ0OC0xIDEtMWgxLjVjMS42NTQgMCAzIDEuMzQ2IDMgM3YxLjc1YzAgLjU1My0uNDQ4IDEtMSAxeiIgZmlsbD0iIzAwYmNkNCIvPjxwYXRoIGQ9Im0xOSAxNGgtMS41Yy0uNTUyIDAtMS0uNDQ3LTEtMXMuNDQ4LTEgMS0xaDEuNWMuNTUxIDAgMS0uNDQ4IDEtMXYtMS43NWMwLS41NTMuNDQ4LTEgMS0xczEgLjQ0NyAxIDF2MS43NWMwIDEuNjU0LTEuMzQ2IDMtMyAzeiIgZmlsbD0iIzAwYmNkNCIvPjxnIGZpbGw9IiMwMGE0YjkiPjxwYXRoIGQ9Im0xOSAwaC0xLjVjLS41NTIgMC0xIC40NDctMSAxcy40NDggMSAxIDFoMS41Yy4wODYgMCAuMTcuMDExLjI1LjAzMnYtMi4wMjJjLS4wODItLjAwNy0uMTY2LS4wMS0uMjUtLjAxeiIvPjxwYXRoIGQ9Im0xOS4yNSAxMS45NjhjLS4wOC4wMjEtLjE2NC4wMzItLjI1LjAzMmgtMS41Yy0uNTUyIDAtMSAuNDQ3LTEgMXMuNDQ4IDEgMSAxaDEuNWMuMDg0IDAgLjE2OC0uMDAzLjI1LS4wMXoiLz48L2c+PC9nPjwvc3ZnPg=="},"design":{"board":"Python3-Noetic","graph":{"blocks":[{"id":"a44065dd-4485-4b47-9c69-d0335039295c","type":"basic.input","data":{"name":"Img"},"position":{"x":262,"y":432}},{"id":"08490010-7599-443b-a4f2-d5f49921be05","type":"basic.input","data":{"name":"Enable"},"position":{"x":261,"y":646}},{"id":"f2c26f9b-0fee-4e27-bc4d-2112fb66498d","type":"basic.output","data":{"name":"Out"},"position":{"x":1391,"y":542}},{"id":"0006-859f70cc-a897-4fbd-b03a-7586eed88c9a","type":"basic.constant","data":{"name":"BoxOrImage","value":"image","local":true},"position":{"x":828,"y":52}},{"id":"db58dc8c-ea94-4866-bf4e-e689e16aac47","type":"basic.code","data":{"code":"import cv2\nimport numpy as np\n\ndef main(inputs, outputs, parameters, synchronise):\n    choice = parameters.read_string(\"BoxOrImage\")\n    \n    auto_enable = False\n    try:\n        enable = inputs.read_number(\"Enable\")\n    except Exception:\n        auto_enable = True\n\n    classifier = cv2.CascadeClassifier('utils/models/haar_cascade/haarcascade_frontalface_default.xml')\n\n    while(auto_enable or inputs.read_number('Enable')):\n        img = inputs.read_image(\"Img\")\n        if img is None:\n            continue\n        bboxes = classifier.detectMultiScale(img)\n        \n        if choice == 'image':\n            for box in bboxes:\n                x, y, x1, y1 = box\n                x1, y1 = x+x1, y+y1\n                cv2.rectangle(img, (x, y), (x1, y1), (0,255,0), 2)\n            outputs.share_image('Out', img)\n        else:\n            to_write = [320, 240, 0, 0]\n            for box in bboxes:\n                to_write = [box[0], box[1], box[2], box[3]]\n                break\n            outputs.share_array(\"Out\", to_write)\n    \n    synchronise()\n\n\n        ","frequency":"30","params":[{"name":"BoxOrImage"}],"ports":{"in":[{"name":"Img"},{"name":"Enable"}],"out":[{"name":"Out"}]},"size":{"width":"774px","height":"499px"}},"position":{"x":440,"y":228}}],"wires":[{"source":{"block":"0006-859f70cc-a897-4fbd-b03a-7586eed88c9a","port":"constant-out","name":"BoxOrImage"},"target":{"block":"db58dc8c-ea94-4866-bf4e-e689e16aac47","port":"BoxOrImage","name":"BoxOrImage"}},{"source":{"block":"db58dc8c-ea94-4866-bf4e-e689e16aac47","port":"Out","name":"Out"},"target":{"block":"f2c26f9b-0fee-4e27-bc4d-2112fb66498d","port":"output-in","name":"output-in"}},{"source":{"block":"a44065dd-4485-4b47-9c69-d0335039295c","port":"input-out","name":"Img"},"target":{"block":"db58dc8c-ea94-4866-bf4e-e689e16aac47","port":"Img","name":"Img"}},{"source":{"block":"08490010-7599-443b-a4f2-d5f49921be05","port":"input-out","name":"Enable"},"target":{"block":"db58dc8c-ea94-4866-bf4e-e689e16aac47","port":"Enable","name":"Enable"}}]}},"dependencies":{}}