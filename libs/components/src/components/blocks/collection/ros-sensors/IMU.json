{"editor":{"id":"d3b9587b-ba0f-4653-8631-eed9513a255b","offsetX":36,"offsetY":-1,"zoom":100,"gridSize":0,"layers":[{"id":"307a638b-1d1e-4a00-a5a4-29d5520aab52","type":"diagram-links","isSvg":true,"transformed":true,"models":{"e303a633-2ba2-4a13-870a-9d06c4f2a346":{"id":"e303a633-2ba2-4a13-870a-9d06c4f2a346","type":"default","selected":false,"source":"0003-ba2f663f-a3a6-4c16-a91d-1a150d594ec4","sourcePort":"018a0a71-0d5f-4c4d-ac16-2baaedb2792d","target":"2065c1ef-9d34-40fb-a761-5b1aaa6fe139","targetPort":"84e8e194-3d3e-467b-8306-dae1e96c15c1","points":[{"id":"b3437ae8-8e86-4100-ace5-5340c217f401","type":"point","x":869,"y":157.5},{"id":"fe9080cb-5364-4da4-a4b7-56258d771223","type":"point","x":870.316650390625,"y":265}],"labels":[],"width":3,"color":"gray","curvyness":50,"selectedColor":"rgb(0,192,255)"},"aaaaea46-f1c7-4784-94ae-55ba4390147d":{"id":"aaaaea46-f1c7-4784-94ae-55ba4390147d","type":"default","selected":false,"source":"2065c1ef-9d34-40fb-a761-5b1aaa6fe139","sourcePort":"39ad3638-c5df-4753-94f3-2657770417c7","target":"93408a71-53ab-4ac7-9e8f-d0d3eed9f0df","targetPort":"e0d6e4e4-8f0c-4252-a0d4-c01a3eba4d69","points":[{"id":"6cb4a47c-3224-4149-a726-5e7ba38a112e","type":"point","x":1308.1500244140625,"y":517},{"id":"48f01139-c7ae-4800-ba2a-24830b4d5d67","type":"point","x":1439.5,"y":518.5}],"labels":[],"width":3,"color":"gray","curvyness":50,"selectedColor":"rgb(0,192,255)"},"543bd284-73b7-4fed-b1cf-1ad9328a8faf":{"id":"543bd284-73b7-4fed-b1cf-1ad9328a8faf","type":"default","selected":false,"source":"341f17fb-4a12-4782-8dcd-4e1f39ec9188","sourcePort":"e9d63fb4-3226-4ca9-a35b-5428d942ec9f","target":"2065c1ef-9d34-40fb-a761-5b1aaa6fe139","targetPort":"2a065eeb-87c7-4df7-a0a2-d51d3aabfd64","points":[{"id":"2eef96b0-3f6a-495d-8001-2d624a9875af","type":"point","x":310.5,"y":515.5},{"id":"468f478e-40fd-47dd-9a01-29afa0c58a96","type":"point","x":432.5,"y":517}],"labels":[],"width":3,"color":"gray","curvyness":50,"selectedColor":"rgb(0,192,255)"}}},{"id":"75dbc34e-d802-42bc-9369-eb62635882c9","type":"diagram-nodes","isSvg":false,"transformed":true,"models":{"341f17fb-4a12-4782-8dcd-4e1f39ec9188":{"id":"341f17fb-4a12-4782-8dcd-4e1f39ec9188","type":"basic.input","selected":false,"x":217,"y":489,"ports":[{"id":"e9d63fb4-3226-4ca9-a35b-5428d942ec9f","type":"port.output","x":303,"y":508,"name":"input-out","alignment":"right","parentNode":"341f17fb-4a12-4782-8dcd-4e1f39ec9188","links":["543bd284-73b7-4fed-b1cf-1ad9328a8faf"],"in":false,"label":"Enable","hideLabel":true}],"data":{"name":"Enable"}},"93408a71-53ab-4ac7-9e8f-d0d3eed9f0df":{"id":"93408a71-53ab-4ac7-9e8f-d0d3eed9f0df","type":"basic.output","selected":false,"x":1431,"y":492,"ports":[{"id":"e0d6e4e4-8f0c-4252-a0d4-c01a3eba4d69","type":"port.input","x":1432,"y":511,"name":"output-in","alignment":"left","parentNode":"93408a71-53ab-4ac7-9e8f-d0d3eed9f0df","links":["aaaaea46-f1c7-4784-94ae-55ba4390147d"],"in":true,"label":"output-in","hideLabel":true}],"data":{"name":"Out"}},"0003-ba2f663f-a3a6-4c16-a91d-1a150d594ec4":{"id":"0003-ba2f663f-a3a6-4c16-a91d-1a150d594ec4","type":"basic.constant","selected":false,"x":808,"y":42,"ports":[{"id":"018a0a71-0d5f-4c4d-ac16-2baaedb2792d","type":"port.output","x":861.5,"y":150,"name":"constant-out","alignment":"bottom","parentNode":"0003-ba2f663f-a3a6-4c16-a91d-1a150d594ec4","links":["e303a633-2ba2-4a13-870a-9d06c4f2a346"],"in":false,"label":"ROSTopic","hideLabel":true}],"data":{"name":"ROSTopic","value":"/mavros/imu/data","local":true}},"2065c1ef-9d34-40fb-a761-5b1aaa6fe139":{"id":"2065c1ef-9d34-40fb-a761-5b1aaa6fe139","type":"basic.code","selected":false,"x":424,"y":187,"ports":[{"id":"2a065eeb-87c7-4df7-a0a2-d51d3aabfd64","type":"port.input","x":425,"y":509.5,"name":"Enable","alignment":"left","parentNode":"2065c1ef-9d34-40fb-a761-5b1aaa6fe139","links":["543bd284-73b7-4fed-b1cf-1ad9328a8faf"],"in":true,"label":"Enable","hideLabel":false},{"id":"39ad3638-c5df-4753-94f3-2657770417c7","type":"port.output","x":1300.6500244140625,"y":509.5,"name":"Out","alignment":"right","parentNode":"2065c1ef-9d34-40fb-a761-5b1aaa6fe139","links":["aaaaea46-f1c7-4784-94ae-55ba4390147d"],"in":false,"label":"Out","hideLabel":false},{"id":"84e8e194-3d3e-467b-8306-dae1e96c15c1","type":"port.parameter","x":862.816650390625,"y":257.5,"name":"ROSTopic","alignment":"top","parentNode":"2065c1ef-9d34-40fb-a761-5b1aaa6fe139","links":["e303a633-2ba2-4a13-870a-9d06c4f2a346"],"in":true,"label":"ROSTopic","hideLabel":false}],"data":{"code":"import numpy as np\nimport rospy\nimport math\nfrom sensor_msgs.msg import Imu\nfrom tf.transformations import euler_from_quaternion\n\ndata = []\n\ndef callback(msg):\n    global data\n    # Get the orientation list from the IMU sensor\n    orientation_list = [msg.orientation.x,msg.orientation.y,msg.orientation.z,msg.orientation.w]\n    # Convert orientation obtainted into values of roll, pitch and yaw\n    (roll,pitch,yaw) = euler_from_quaternion(orientation_list)\n    # Convert val;ues in Radians to Degrees\n    roll = math.degrees(roll)\n    pitch = math.degrees(pitch)\n    yaw = math.degrees(yaw)\n    # Obtain Angular Velocities from IMU sensor\n    angVel_x = msg.angular_velocity.x\n    angVel_y = msg.angular_velocity.y\n    angVel_z = msg.angular_velocity.z\n    # Store all this data in 'data' variable for use in main function\n    data = [roll, pitch, yaw, angVel_x, angVel_y, angVel_z]\n\ndef main(inputs, outputs, parameters, synchronise):\n    global data \n    auto_enable = False\n    try:\n        enable = inputs.read_number('Enable')\n    except Exception:\n        auto_enable = True\n\n    rospy.init_node('imu_vc')\n    rostopic_name = parameters.read_string(\"ROSTopic\")\n    rospy.Subscriber(rostopic_name, Imu, callback)\n\n    while ((auto_enable or inputs.read_number('Enable')) and not rospy.is_shutdown()):\n        if not data:\n            continue\n\n        outputs.share_array(\"Out\", data)\n        synchronise()","frequency":"30","params":[{"name":"ROSTopic"}],"ports":{"in":[{"name":"Enable"}],"out":[{"name":"Out"}]},"size":{"width":"852px","height":"500px"}}}}}]},"version":"3.0","package":{"name":"IMU","version":"1.0.0","description":"Reads data from IMU","author":"Toshan Luktuke","image":"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhLS0gQ3JlYXRlZCB3aXRoIElua3NjYXBlIChodHRwOi8vd3d3Lmlua3NjYXBlLm9yZy8pIC0tPgo8c3ZnCiAgICB4bWxuczppbmtzY2FwZT0iaHR0cDovL3d3dy5pbmtzY2FwZS5vcmcvbmFtZXNwYWNlcy9pbmtzY2FwZSIKICAgIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyIKICAgIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIKICAgIHhtbG5zOnNvZGlwb2RpPSJodHRwOi8vc29kaXBvZGkuc291cmNlZm9yZ2UubmV0L0RURC9zb2RpcG9kaS0wLmR0ZCIKICAgIHhtbG5zOmNjPSJodHRwOi8vY3JlYXRpdmVjb21tb25zLm9yZy9ucyMiCiAgICB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIKICAgIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIKICAgIHhtbG5zOnN2Zz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgICB4bWxuczpuczE9Imh0dHA6Ly9zb3ppLmJhaWVyb3VnZS5mciIKICAgIGlkPSJzdmcyIgogICAgc29kaXBvZGk6ZG9jbmFtZT0iYXJyb3ctcm90YXRlLTItZGlyZWN0aW9ucy5zdmciCiAgICBpbmtzY2FwZTpleHBvcnQtZmlsZW5hbWU9IkM6XERvY3VtZW50cyBhbmQgU2V0dGluZ3NcbWlrZWZcRGVza3RvcFxhcnJvdy0yLWRpcmVjdGlvbnMucG5nIgogICAgdmlld0JveD0iMCAwIDM3Ni4wNCAzODAuMzMiCiAgICBpbmtzY2FwZTpleHBvcnQteGRwaT0iOTAiCiAgICB2ZXJzaW9uPSIxLjEiCiAgICBpbmtzY2FwZTpleHBvcnQteWRwaT0iOTAiCiAgICBpbmtzY2FwZTp2ZXJzaW9uPSIwLjQ4LjMuMSByOTg4NiIKICA+CiAgPGRlZnMKICAgICAgaWQ9ImRlZnM0IgogICAgPgogICAgPGxpbmVhckdyYWRpZW50CiAgICAgICAgaWQ9ImxpbmVhckdyYWRpZW50Mzg2OCIKICAgICAgPgogICAgICA8c3RvcAogICAgICAgICAgaWQ9InN0b3AzODcwIgogICAgICAgICAgc3R5bGU9InN0b3AtY29sb3I6IzYyOTBhOSIKICAgICAgICAgIG9mZnNldD0iMCIKICAgICAgLz4KICAgICAgPHN0b3AKICAgICAgICAgIGlkPSJzdG9wMzg3MiIKICAgICAgICAgIHN0eWxlPSJzdG9wLWNvbG9yOiMwMDJiNDgiCiAgICAgICAgICBvZmZzZXQ9IjEiCiAgICAgIC8+CiAgICA8L2xpbmVhckdyYWRpZW50CiAgICA+CiAgICA8cmFkaWFsR3JhZGllbnQKICAgICAgICBpZD0icmFkaWFsR3JhZGllbnQzODY2IgogICAgICAgIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIgogICAgICAgIGN5PSI0NDguNTQiCiAgICAgICAgY3g9IjMwOC4zNSIKICAgICAgICBncmFkaWVudFRyYW5zZm9ybT0ibWF0cml4KC45Nzc1OSAtLjIxMDUwIC4yMTEwOSAuOTgwMzIgLTg3Ljc1NyA3My44NjQpIgogICAgICAgIHI9IjE4My41OSIKICAgICAgICBpbmtzY2FwZTpjb2xsZWN0PSJhbHdheXMiCiAgICAgID4KICAgICAgPHN0b3AKICAgICAgICAgIGlkPSJzdG9wMzg2MiIKICAgICAgICAgIHN0eWxlPSJzdG9wLWNvbG9yOiNkMjdjMjYiCiAgICAgICAgICBvZmZzZXQ9IjAiCiAgICAgIC8+CiAgICAgIDxzdG9wCiAgICAgICAgICBpZD0ic3RvcDM4NjQiCiAgICAgICAgICBzdHlsZT0ic3RvcC1jb2xvcjojMjgxNTAwIgogICAgICAgICAgb2Zmc2V0PSIxIgogICAgICAvPgogICAgPC9yYWRpYWxHcmFkaWVudAogICAgPgogICAgPGxpbmVhckdyYWRpZW50CiAgICAgICAgaWQ9ImxpbmVhckdyYWRpZW50Mzg3NCIKICAgICAgICB5Mj0iNDYyLjMxIgogICAgICAgIHhsaW5rOmhyZWY9IiNsaW5lYXJHcmFkaWVudDM4NjgiCiAgICAgICAgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiCiAgICAgICAgeDI9IjM2My4xOSIKICAgICAgICBncmFkaWVudFRyYW5zZm9ybT0ibWF0cml4KC45Nzc1OSAtLjIxMDUwIC4yMTA1MCAuOTc3NTkgLTg3LjQ5NCA3NS4wODYpIgogICAgICAgIHkxPSIzODAuMTYiCiAgICAgICAgeDE9IjM2MC40MyIKICAgICAgICBpbmtzY2FwZTpjb2xsZWN0PSJhbHdheXMiCiAgICAvPgogICAgPGxpbmVhckdyYWRpZW50CiAgICAgICAgaWQ9ImxpbmVhckdyYWRpZW50Mzg4MiIKICAgICAgICB5Mj0iNTI0Ljc4IgogICAgICAgIHhsaW5rOmhyZWY9IiNsaW5lYXJHcmFkaWVudDM4NjgiCiAgICAgICAgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiCiAgICAgICAgeDI9IjM1OC41MSIKICAgICAgICBncmFkaWVudFRyYW5zZm9ybT0ibWF0cml4KC45Nzc1OSAtLjIxMDUwIC4yMTA1MCAuOTc3NTkgLTg3LjQ5NCA3NS4wODYpIgogICAgICAgIHkxPSI1OTIuNjMiCiAgICAgICAgeDE9IjM1NC44MiIKICAgICAgICBpbmtzY2FwZTpjb2xsZWN0PSJhbHdheXMiCiAgICAvPgogICAgPGxpbmVhckdyYWRpZW50CiAgICAgICAgaWQ9ImxpbmVhckdyYWRpZW50Mzg5MCIKICAgICAgICB5Mj0iNDY3LjM2IgogICAgICAgIHhsaW5rOmhyZWY9IiNsaW5lYXJHcmFkaWVudDM4NjgiCiAgICAgICAgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiCiAgICAgICAgeDI9IjQ4NC4yOSIKICAgICAgICBncmFkaWVudFRyYW5zZm9ybT0ibWF0cml4KC45Nzc1OSAtLjIxMDUwIC4yMTA1MCAuOTc3NTkgLTg3LjQ5NCA3NS4wODYpIgogICAgICAgIHkxPSI1MDEuNjUiCiAgICAgICAgeDE9IjM3Mi4xNCIKICAgICAgICBpbmtzY2FwZTpjb2xsZWN0PSJhbHdheXMiCiAgICAvPgogIDwvZGVmcwogID4KICA8c29kaXBvZGk6bmFtZWR2aWV3CiAgICAgIGlkPSJiYXNlIgogICAgICBmaXQtbWFyZ2luLWxlZnQ9IjAiCiAgICAgIGlua3NjYXBlOnpvb209IjEuNCIKICAgICAgYm9yZGVyb3BhY2l0eT0iMS4wIgogICAgICBpbmtzY2FwZTpjdXJyZW50LWxheWVyPSJsYXllcjMiCiAgICAgIGlua3NjYXBlOmN4PSIxLjA0MTM4NzEiCiAgICAgIGlua3NjYXBlOmN5PSIxNTkuMjA4OTMiCiAgICAgIGlua3NjYXBlOndpbmRvdy1tYXhpbWl6ZWQ9IjEiCiAgICAgIHNob3dncmlkPSJmYWxzZSIKICAgICAgZml0LW1hcmdpbi1yaWdodD0iMCIKICAgICAgc2hvd2d1aWRlcz0idHJ1ZSIKICAgICAgYm9yZGVyY29sb3I9IiM2NjY2NjYiCiAgICAgIGlua3NjYXBlOndpbmRvdy14PSItOCIKICAgICAgaW5rc2NhcGU6Z3VpZGUtYmJveD0idHJ1ZSIKICAgICAgaW5rc2NhcGU6d2luZG93LXk9IjM1OCIKICAgICAgZml0LW1hcmdpbi1ib3R0b209IjAiCiAgICAgIGlua3NjYXBlOndpbmRvdy13aWR0aD0iMTY4MCIKICAgICAgaW5rc2NhcGU6cGFnZW9wYWNpdHk9IjAuMCIKICAgICAgaW5rc2NhcGU6cGFnZXNoYWRvdz0iMiIKICAgICAgcGFnZWNvbG9yPSIjZmZmZmZmIgogICAgICBpbmtzY2FwZTpkb2N1bWVudC11bml0cz0icHgiCiAgICAgIGlua3NjYXBlOndpbmRvdy1oZWlnaHQ9Ijk5OCIKICAgICAgZml0LW1hcmdpbi10b3A9IjAiCiAgLz4KICA8ZwogICAgICBpZD0ibGF5ZXIxIgogICAgICBzdHlsZT0iZGlzcGxheTpub25lIgogICAgICBpbmtzY2FwZTpsYWJlbD0iTGF5ZXIgMSIKICAgICAgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTEyMC4zIC0yNTguNTkpIgogICAgICBpbmtzY2FwZTpncm91cG1vZGU9ImxheWVyIgogICAgICBzb2RpcG9kaTppbnNlbnNpdGl2ZT0idHJ1ZSIKICAgID4KICAgIDxnCiAgICAgICAgaWQ9ImczODAxIgogICAgICAgIHN0eWxlPSJzdHJva2Utd2lkdGg6MC40IgogICAgICAgIHRyYW5zZm9ybT0idHJhbnNsYXRlKDMuMjc1OSAtNDEuNzU5KSIKICAgICAgPgogICAgICA8cGF0aAogICAgICAgICAgaWQ9InBhdGgyOTg1IgogICAgICAgICAgc29kaXBvZGk6cng9IjE4Mi44Mzc2MiIKICAgICAgICAgIHNvZGlwb2RpOnJ5PSI0Ni40NjcwMTgiCiAgICAgICAgICBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjAuNDtmaWxsOm5vbmUiCiAgICAgICAgICBzb2RpcG9kaTp0eXBlPSJhcmMiCiAgICAgICAgICBkPSJtNDc4LjgxIDQxNy45OWMwIDI1LjY2My04MS44NTkgNDYuNDY3LTE4Mi44NCA0Ni40NjdzLTE4Mi44NC0yMC44MDQtMTgyLjg0LTQ2LjQ2NyA4MS44NTktNDYuNDY3IDE4Mi44NC00Ni40NjcgMTgyLjg0IDIwLjgwNCAxODIuODQgNDYuNDY3eiIKICAgICAgICAgIHRyYW5zZm9ybT0idHJhbnNsYXRlKDEwLDQyKSIKICAgICAgICAgIHNvZGlwb2RpOmN5PSI0MTcuOTg2MzkiCiAgICAgICAgICBzb2RpcG9kaTpjeD0iMjk1Ljk3NDciCiAgICAgIC8+CiAgICAgIDxwYXRoCiAgICAgICAgICBpZD0icGF0aDI5ODUtMSIKICAgICAgICAgIHNvZGlwb2RpOnJ4PSIxODIuODM3NjIiCiAgICAgICAgICBzb2RpcG9kaTpyeT0iNDYuNDY3MDE4IgogICAgICAgICAgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDowLjQ7ZmlsbDpub25lIgogICAgICAgICAgc29kaXBvZGk6dHlwZT0iYXJjIgogICAgICAgICAgZD0ibTQ3OC44MSA0MTcuOTljMCAyNS42NjMtODEuODU5IDQ2LjQ2Ny0xODIuODQgNDYuNDY3cy0xODIuODQtMjAuODA0LTE4Mi44NC00Ni40NjcgODEuODU5LTQ2LjQ2NyAxODIuODQtNDYuNDY3IDE4Mi44NCAyMC44MDQgMTgyLjg0IDQ2LjQ2N3oiCiAgICAgICAgICB0cmFuc2Zvcm09InRyYW5zbGF0ZSg5LjA5MTQgMTAzLjA0KSIKICAgICAgICAgIHNvZGlwb2RpOmN5PSI0MTcuOTg2MzkiCiAgICAgICAgICBzb2RpcG9kaTpjeD0iMjk1Ljk3NDciCiAgICAgIC8+CiAgICA8L2cKICAgID4KICAgIDxnCiAgICAgICAgaWQ9ImczNzk3IgogICAgICAgIHN0eWxlPSJzdHJva2Utd2lkdGg6MC40IgogICAgICAgIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0zMC42MzIgMi40MzM1KSIKICAgICAgPgogICAgICA8cGF0aAogICAgICAgICAgaWQ9InBhdGgyOTg1LTciCiAgICAgICAgICBzb2RpcG9kaTpyeD0iMTgyLjgzNzYyIgogICAgICAgICAgc29kaXBvZGk6cnk9IjQ2LjQ2NzAxOCIKICAgICAgICAgIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6LjM3MzUzO2ZpbGw6bm9uZSIKICAgICAgICAgIHNvZGlwb2RpOnR5cGU9ImFyYyIKICAgICAgICAgIGQ9Im00NzguODEgNDE3Ljk5YzAgMjUuNjYzLTgxLjg1OSA0Ni40NjctMTgyLjg0IDQ2LjQ2N3MtMTgyLjg0LTIwLjgwNC0xODIuODQtNDYuNDY3IDgxLjg1OS00Ni40NjcgMTgyLjg0LTQ2LjQ2NyAxODIuODQgMjAuODA0IDE4Mi44NCA0Ni40Njd6IgogICAgICAgICAgdHJhbnNmb3JtPSJtYXRyaXgoMCAxIC0xLjE0NjggMCA4NTUuODQgMTQ5Ljc5KSIKICAgICAgICAgIHNvZGlwb2RpOmN5PSI0MTcuOTg2MzkiCiAgICAgICAgICBzb2RpcG9kaTpjeD0iMjk1Ljk3NDciCiAgICAgIC8+CiAgICAgIDxwYXRoCiAgICAgICAgICBpZD0icGF0aDI5ODUtMS00IgogICAgICAgICAgc29kaXBvZGk6cng9IjE4Mi44Mzc2MiIKICAgICAgICAgIHNvZGlwb2RpOnJ5PSI0Ni40NjcwMTgiCiAgICAgICAgICBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOi4zNzM1MztmaWxsOm5vbmUiCiAgICAgICAgICBzb2RpcG9kaTp0eXBlPSJhcmMiCiAgICAgICAgICBkPSJtNDc4LjgxIDQxNy45OWMwIDI1LjY2My04MS44NTkgNDYuNDY3LTE4Mi44NCA0Ni40NjdzLTE4Mi44NC0yMC44MDQtMTgyLjg0LTQ2LjQ2NyA4MS44NTktNDYuNDY3IDE4Mi44NC00Ni40NjcgMTgyLjg0IDIwLjgwNCAxODIuODQgNDYuNDY3eiIKICAgICAgICAgIHRyYW5zZm9ybT0ibWF0cml4KDAgMSAtMS4xNDY4IDAgNzgxLjY5IDE1MC44OCkiCiAgICAgICAgICBzb2RpcG9kaTpjeT0iNDE3Ljk4NjM5IgogICAgICAgICAgc29kaXBvZGk6Y3g9IjI5NS45NzQ3IgogICAgICAvPgogICAgPC9nCiAgICA+CiAgICA8cGF0aAogICAgICAgIGlkPSJwYXRoMzgwNSIKICAgICAgICBzb2RpcG9kaTpub2RldHlwZXM9ImNjY2NjIgogICAgICAgIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MC40O2ZpbGw6bm9uZSIKICAgICAgICBpbmtzY2FwZTpjb25uZWN0b3ItY3VydmF0dXJlPSIwIgogICAgICAgIGQ9Im0xMzguMjggMzczLjM3djE3NS44MmwxMDcuNDQgMzkuOTM3IDIuMTQyOS0yMDguNTZ6IgogICAgLz4KICAgIDxwYXRoCiAgICAgICAgaWQ9InBhdGgzODA3IgogICAgICAgIHNvZGlwb2RpOm5vZGV0eXBlcz0iY2NjY2MiCiAgICAgICAgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDowLjQ7ZmlsbDpub25lIgogICAgICAgIGlua3NjYXBlOmNvbm5lY3Rvci1jdXJ2YXR1cmU9IjAiCiAgICAgICAgZD0ibTI3Mi41IDM4NS44N2gxNjUuNjdsLTExLjQyOSAyMTIuMjUtMTY3LjgxIDMuMjE4NnoiCiAgICAvPgogIDwvZwogID4KICA8ZwogICAgICBpZD0ibGF5ZXIzIgogICAgICBpbmtzY2FwZTpsYWJlbD0iTGF5ZXIjMSIKICAgICAgaW5rc2NhcGU6Z3JvdXBtb2RlPSJsYXllciIKICAgICAgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTEyMC4zIC0yNTguNTkpIgogICAgPgogICAgPHBhdGgKICAgICAgICBpZD0icGF0aDM4NTgiCiAgICAgICAgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDo1O2ZpbGw6dXJsKCNyYWRpYWxHcmFkaWVudDM4NjYpIgogICAgICAgIGlua3NjYXBlOmNvbm5lY3Rvci1jdXJ2YXR1cmU9IjAiCiAgICAgICAgZD0ibTQ3OS45NiAzNzUuODIgMTIuMDkgNjAuOTQ1cy0xNC41MjMtMjQuMjU2LTk3LjUxOS0xNi4yMDFjMCAwLTQ5LjkxNSAwLjkzMTQtMTA0LjU4IDE1LjgwMiAwIDAgMTAuNzkgNjYuOTA4IDM3LjY1NSAxMjIuMDktMC40OTM3NiAwLjEwNjMyIDI3LjI1OSA2MS44MTIgNTEuODEgNjAuNjU5LTEuMDkzOC0wLjI4MTEzLTcwLjY3NiAxNy4yODUtNzAuNjc2IDE3LjI4NXMtMjMuMTM4IDIuOTE1Ni00OC40ODQtNTAuMDA5YzAuMzg3NDQtMC42MDAwOC0yOS4wNTItNTUuNzQzLTQyLjEwNi0xMjguMzYtMC40OTM3NiAwLjEwNjMyLTc4LjU2OSAyNi4yMTctODIuNzcyIDU3LjA4OGwtMTEuOTgzLTYwLjQ1MXMtMi4wNzIyLTI2LjQyIDg2LjIyOC01Ny44MzJjMC4yODExMi0xLjA5MzgtMTIuMzM4LTk4LjA5MSAyMC42NjEtMTE3LjYgMC40OTM3Ni0wLjEwNjMyIDc2LjcwOC0xOC4wNjcgNzYuNzA4LTE4LjA2N3MtMzQuMzIgMy43NzMzLTI0Ljg2MiAxMTQuODhjLTAuNjAwMDgtMC4zODc0MyA0Mi40MjYtMTEuNzE4IDk1Ljg2NS0xNS40NzUtMC4xMDYzMi0wLjQ5Mzc2IDg1LjU3Mi04LjA5MjUgMTAxLjk2IDE1LjI0NHoiCiAgICAvPgogIDwvZwogID4KICA8ZwogICAgICBpZD0ibGF5ZXIyIgogICAgICBpbmtzY2FwZTpsYWJlbD0iTGF5ZXIiCiAgICAgIGlua3NjYXBlOmdyb3VwbW9kZT0ibGF5ZXIiCiAgICAgIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0xMjAuMyAtMjU4LjU5KSIKICAgID4KICAgIDxwYXRoCiAgICAgICAgaWQ9InBhdGgzODQ5IgogICAgICAgIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6NTtmaWxsOnVybCgjbGluZWFyR3JhZGllbnQzODc0KSIKICAgICAgICBpbmtzY2FwZTpjb25uZWN0b3ItY3VydmF0dXJlPSIwIgogICAgICAgIGQ9Im0yMzIuNTUgMjc3LjcxIDc3LjAyNi0xNi41ODZzMzQuMDAxLTUuMjU0NiA3MS4xMTcgMTA3LjEzYy0wLjEwNjMyLTAuNDkzNzcgNDEuNTgyLTguNDM3IDQxLjU4Mi04LjQzN2wtNTcuMjEgOTEuODktMTAzLjc3LTU3LjIyIDQ2LjkwNy0xMC4xcy0zMS43ODQtMTA2LjgyLTc1LjY2Ny0xMDYuNjd6IgogICAgLz4KICAgIDxwYXRoCiAgICAgICAgaWQ9InBhdGgzODUxIgogICAgICAgIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6NTtmaWxsOnVybCgjbGluZWFyR3JhZGllbnQzODgyKSIKICAgICAgICBpbmtzY2FwZTpjb25uZWN0b3ItY3VydmF0dXJlPSIwIgogICAgICAgIGQ9Im0zMDkuNzMgNjM2LjE4IDc4LjQwMS0xNy4zOThzMTYuMjQ5LTEzLjMxNSAxOC4yNzEtMzcuNTE3YzAuNDkzNzYtMC4xMDYzMiA0OS42NTctMTEuNzI2IDQ5LjY1Ny0xMS43MjZsLTgyLjU2Ny01Ny4xMzYtODAuNzIzIDk1LjM5NiA0MS4wODgtOC4zMzA2cy0zLjM4OTggMzIuMjQ2LTI0LjEyOCAzNi43MTF6IgogICAgLz4KICAgIDxwYXRoCiAgICAgICAgaWQ9InBhdGgzODUzIgogICAgICAgIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6NTtmaWxsOiM2MjhmYTgiCiAgICAgICAgaW5rc2NhcGU6Y29ubmVjdG9yLWN1cnZhdHVyZT0iMCIKICAgICAgICBkPSJtMTIyLjggNDU0LjI3IDEzLjIyMSA2My44MDFzNS43MjY4IDEyLjIgMTUuMTQ2IDEyLjc1NWMtMC4xMDYzMi0wLjQ5Mzc3IDEyLjI1NyA1Mi4xMjYgMTIuMjU3IDUyLjEyNmwxNy4zMTYtNzUuNTQzLTU0LjUyNy05Ny4yNzMgMTIuNDc3IDYwLjM0NXMtMTIuMDMyLTMuMDkyNC0xNS44OS0xNi4yMTF6IgogICAgLz4KICAgIDxwYXRoCiAgICAgICAgaWQ9InBhdGgzODU1IgogICAgICAgIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6NTtmaWxsOnVybCgjbGluZWFyR3JhZGllbnQzODkwKSIKICAgICAgICBpbmtzY2FwZTpjb25uZWN0b3ItY3VydmF0dXJlPSIwIgogICAgICAgIGQ9Im0yMzQuNTcgMzk1LjA3LTQwLjI4MiAxMTAuNDUgODEuNjE2IDkzLjUwNi0xMi40NDYtNjUuMDAxczIzMC0zNS41NzUgMjMwLjMzLTk0LjAyOGMwLjk4NzUyLTAuMjEyNjQtMTIuMzAyLTYxLjkzMy0xMi4zMDItNjEuOTMzczI4Ljk0NiA1NS4yNDktMjI5LjU5IDk3LjQ4NGMwLjEwNjMyIDAuNDkzNzctMTcuMzMtODAuNDgzLTE3LjMzLTgwLjQ4M3oiCiAgICAvPgogIDwvZwogID4KICAKPC9zdmcKPgo="},"design":{"board":"Python3-Noetic","graph":{"blocks":[{"id":"341f17fb-4a12-4782-8dcd-4e1f39ec9188","type":"basic.input","data":{"name":"Enable"},"position":{"x":217,"y":489}},{"id":"93408a71-53ab-4ac7-9e8f-d0d3eed9f0df","type":"basic.output","data":{"name":"Out"},"position":{"x":1431,"y":492}},{"id":"0003-ba2f663f-a3a6-4c16-a91d-1a150d594ec4","type":"basic.constant","data":{"name":"ROSTopic","value":"/mavros/imu/data","local":true},"position":{"x":808,"y":42}},{"id":"2065c1ef-9d34-40fb-a761-5b1aaa6fe139","type":"basic.code","data":{"code":"import numpy as np\nimport rospy\nimport math\nfrom sensor_msgs.msg import Imu\nfrom tf.transformations import euler_from_quaternion\n\ndata = []\n\ndef callback(msg):\n    global data\n    # Get the orientation list from the IMU sensor\n    orientation_list = [msg.orientation.x,msg.orientation.y,msg.orientation.z,msg.orientation.w]\n    # Convert orientation obtainted into values of roll, pitch and yaw\n    (roll,pitch,yaw) = euler_from_quaternion(orientation_list)\n    # Convert val;ues in Radians to Degrees\n    roll = math.degrees(roll)\n    pitch = math.degrees(pitch)\n    yaw = math.degrees(yaw)\n    # Obtain Angular Velocities from IMU sensor\n    angVel_x = msg.angular_velocity.x\n    angVel_y = msg.angular_velocity.y\n    angVel_z = msg.angular_velocity.z\n    # Store all this data in 'data' variable for use in main function\n    data = [roll, pitch, yaw, angVel_x, angVel_y, angVel_z]\n\ndef main(inputs, outputs, parameters, synchronise):\n    global data \n    auto_enable = False\n    try:\n        enable = inputs.read_number('Enable')\n    except Exception:\n        auto_enable = True\n\n    rospy.init_node('imu_vc')\n    rostopic_name = parameters.read_string(\"ROSTopic\")\n    rospy.Subscriber(rostopic_name, Imu, callback)\n\n    while ((auto_enable or inputs.read_number('Enable')) and not rospy.is_shutdown()):\n        if not data:\n            continue\n\n        outputs.share_array(\"Out\", data)\n        synchronise()","frequency":"30","params":[{"name":"ROSTopic"}],"ports":{"in":[{"name":"Enable"}],"out":[{"name":"Out"}]},"size":{"width":"852px","height":"500px"}},"position":{"x":424,"y":187}}],"wires":[{"source":{"block":"0003-ba2f663f-a3a6-4c16-a91d-1a150d594ec4","port":"constant-out","name":"ROSTopic"},"target":{"block":"2065c1ef-9d34-40fb-a761-5b1aaa6fe139","port":"ROSTopic","name":"ROSTopic"}},{"source":{"block":"2065c1ef-9d34-40fb-a761-5b1aaa6fe139","port":"Out","name":"Out"},"target":{"block":"93408a71-53ab-4ac7-9e8f-d0d3eed9f0df","port":"output-in","name":"output-in"}},{"source":{"block":"341f17fb-4a12-4782-8dcd-4e1f39ec9188","port":"input-out","name":"Enable"},"target":{"block":"2065c1ef-9d34-40fb-a761-5b1aaa6fe139","port":"Enable","name":"Enable"}}]}},"dependencies":{}}